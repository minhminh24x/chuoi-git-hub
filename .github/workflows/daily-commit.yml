name: ðŸŒŸ Daily Commit - Duy trÃ¬ chuá»—i 365 ngÃ y

on:
  schedule:
    # Cháº¡y lÃºc 14:00 UTC = 21:00 giá» Viá»‡t Nam (GMT+7)
    - cron: '0 14 * * *'
  workflow_dispatch: # Cho phÃ©p cháº¡y thá»§ cÃ´ng

jobs:
  daily-commit:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: ðŸ“… Táº¡o thÃ´ng tin ngÃ y
        id: date
        run: |
          # Äáº·t timezone Viá»‡t Nam
          export TZ='Asia/Ho_Chi_Minh'
          
          echo "today=$(date +'%d/%m/%Y')" >> $GITHUB_OUTPUT
          echo "day_of_year=$(date +'%j' | sed 's/^0*//')" >> $GITHUB_OUTPUT
          echo "time=$(date +'%H:%M:%S')" >> $GITHUB_OUTPUT
          
          # Random emoji
          emojis=("ðŸŒŸ" "ðŸ’ª" "ðŸš€" "âœ¨" "ðŸŽ¯" "ðŸŒ±" "ðŸ’¡" "âš¡" "ðŸ”¥" "ðŸŽ‰")
          random_emoji=${emojis[$RANDOM % ${#emojis[@]}]}
          echo "emoji=$random_emoji" >> $GITHUB_OUTPUT
      
      - name: ðŸ“ Cáº­p nháº­t log
        run: |
          mkdir -p logs
          
          cat >> logs/commit-log.md << EOF

## ${{ steps.date.outputs.emoji }} NgÃ y ${{ steps.date.outputs.day_of_year }}/365 - ${{ steps.date.outputs.today }}

- â° Thá»i gian: ${{ steps.date.outputs.time }}
- âœ… Auto commit tá»« GitHub Actions!
- ðŸ¤– Triggered by: ${{ github.event_name }}

---
EOF

      - name: ðŸ”„ Commit vÃ  Push
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action Bot"
          
          git add .
          git commit -m "${{ steps.date.outputs.emoji }} Day ${{ steps.date.outputs.day_of_year }}/365 - ${{ steps.date.outputs.today }} - Keep the streak alive! ðŸ”¥"
          git push
